# 移动

> 其实现在才算是正式学习来着，前面属于是导论，虽然我也想快些开始教学，好让你不那样无聊,
> 不过我还是希望能让你明白 Vim 为什么要这样设计，不至于让你学着学着觉得好麻烦，打退堂鼓
> 现在你应该稍微坚定了些学习 Vim 的决心了吧

Vim 有相当丰富的移动方式，不过先放轻松，你不用全部记下来，对它们有印象就好了

很基础就要背来背去直到记住吗，不用啦，后面会反复用到的，我会提示你的，很快就能记住了

但是练习要做噢，我花了一些心思去出这些练习的，直接被跳过还是会比较难过呢

> 忘记问了，你应该是知道指位和习惯盲打的对吧? 这是学习 Vim 的前置条件，不然会学得有些累噢

## 上下左右

在普通模式下 Vim 使用`h`，`j`，`k`，`l` 来 < v ^ > 移动，这是人在打字时右手最放松自然的摆放位置

> 移动操作前都可以输入次数来进行重复噢，`10j` 就是向下移动10行，以此类推  
LazyVim 设置了相对行号，这样你可以直接输入想去行边上的相对行号来进行快速上下移动

### 练习

```map
         ████████████████████                     ████████████████████████
start ->    ██   █ █  ███   █                     █   █ █          █ █   █
         ██ █  █          █ █                     █ █  ██ ███  █ █  █  █ █
         █    █████ ████ ██ █                     ██ █   █   █ █ ██   █  █
         █ ██ ██    ██   █  █                     █    █   █  █  █ █ █ █ █
         █  █ ██ ████  ██████                     ██ ██  █ █ █  █ █  █ █ █
         ██      █ █           --- keep going -->     █ █ █   █ ██    ██ █
         ████████████████████                     █████ █ █ ██  ██  █    █
                                                  █      █      █  █  █  █
         ██████████████████████████████████████████ █ █ █ ██ █ █ ███  █ ██
         ██  █ ██     █  █  █ █      ██ █     ██    █    █ █ █ █ █   █   █
         █ █      █ █           ██ █   ██ █ █  █ ████ █ █ ██  █ █  ██ █ ██
         █ █ █ ██  █ █ █ █ █ █       █     █ █   ██    █ ██ ████  █  █   █
         █   █ █    ██  █ █ █ █ ███ █ ███ █ █ █ ██  █ █     █    ██ █  █ █
         █ ██  ███ █  ██   ███  █  ██    █ █ █     █ █ █ ███ █████    █  █
         ██ ███ ██       █  █  ██     ██      █ ██  █ █ █ █ █     █ █  █ █
goal <-          ██████████   ███ ██  █ █ █  ███  ██ █ █  █   █ █     █  █
         ███ █ ███         ███ █  █ ██ █ █ █ █   █          ██ █ █████ █ █
         █ █       █ ██ █        █ █   ██ █          █ █   █             █
         █████████████████████████████████████████████████████████████████
```

还挺容易的吧，不过我相信这下你应该能记住怎么上下左右了

## 词间移动

- `w` -> word       下一个"单词头部"
- `b` -> back       上一个"单词头部"
- `e` -> end        下一个"单词尾部"
- `ge`-> goto end   上一个"单词尾部"

注意断句噢，比如说`e`，具体作用是: 移动到当前单词的尾部，如果已在尾部，则移动到下一个单词尾部

当使用大写`W`，`B`，`E`时，则基于词群移动  
以空白符分隔的若干字符称为词群

### Give it a try

```(text)
<!--When in danger or in doubt，Run in circles，scream and shout-->

#import <stdio>

static class Hello {
  int32 main() then
    let mut name = input('What'is you name?'),
    console_log('hmm..').
    system('sleep 3'),

    val age = input('And how old are you?'),
    name = if (age == Genger::Male) :
        "Gentle" + name;
    fi
        "Lady" + name;

    System.Console.Print(`Hello $name`)

    ret 0
  end
}
```

## 行内快速移动

- `0` -> first 移动到第一列
- `^` -> start 移动到第一个字符
- `$` -> end   移动到最后一个字符

```(text)
     ^start end$
⤒  first
```

> 在正则表达式当中 ^ 表示开头，$ 表示结尾

- `f(char)` -> find char 移动光标到所查找字符上
- `t(char)` -> till char 移动光标直到所查找字符

小写是向后查找，大写则是向前查找

- `;` -> 正向重复查找字符
- `,` -> 反向重复查找字符

### 练习

不使用词间移动，使你的光标经过所有动物，而跳过所有非动物

```(text)
rabbits are Beginning Tank tiger Gatling dog Page panda Preferred fish Stone snake Significant goat Is Goal ⟡
```

然后再反向，使你的光标经过所有非动物，而跳过所有动物

## 搜索

聪明的你应该发现了上面所有动物都是小写字母单词，所以其实是有更简单的办法来解决这个问题的，搜索所有以小写开头的字母就好了嘛

- `/` -> 向后搜索
- `?` -> 向前搜索
- `*` -> 向前搜索光标下单词
- `#` -> 向后搜索光标下单词
- `n` -> 正向重复搜索
- `N` -> 反向重复搜索

Vim 的搜索是支持正则表达式的，来感受一下正则搜索的力量吧!

```
112gg0            我们先来到练习指定地点
zt                稍微提高一下光标的位置好对照下文操作
/\v\C<[a-z]       搜索小写单词的开头
nnn               重复搜索到 goat 为止
/[A-Z]            搜索大写字母
NNN               重复搜索到 Beginning 为止
```

想进阶搜索能力? 没问题 -> [搜索](./扩展/搜索.md)

## 跨行移动

这和行内移动没有本质区别，只是移动距离往往很远

- `%` -> 对应的各种括号，用得不是很多

- `(` -> 上一句子，用空行或英文句号分隔的
- `)` -> 下一句子
- `{` -> 上一段落，用空行分隔的
- `}` -> 下一段落

- `]}`-> 右边的大括号
- `[{`-> 左边的大括号
- `])`-> 右边的小括号
- `[(`-> 左边的小括号

像这些长距离移动会被当成`跳转`

- `C-o` -> 回到跳转前的位置
- `C-i` -> 回到跳转后的位置

### Try

```(javaScript)
const modules = [
  {
    name: 'notification',
    icon: ' ',
    content: Box(),
  }，{
    name: 'wifi',
    icon: '󰖩 ',
    content: Box(),
  }，{
    name: 'bluetooth',
    icon: '󰂯',
    content: Box(),
  }
]

export function Tab({ name，icon，content }) {
  return FlowBox({
    className: `tab-${name}`,
  });
}
```

### 插件

#### flesh

- `s(char)` -> search char

真的很便捷啊 指哪打哪

#### treesitter

- `]]` -> 下一个对光标下函数变量的引用
- `]f` -> 下一个函数开头
- `]F` -> 下一个函数结尾
- `]c` -> 下一个类型开头
- `]C` -> 下一个类型结尾
- `]a` -> 下一个参数开关
- `]A` -> 下一个参数结尾

## 行间移动

这和行内移动有本质的区别，结合操作去使用就明白了

- `j` -> 下
- `k` -> 上

## 绝对位置

- `gg`-> 顶
- `G` -> 底
- `(n)%` -> 去到文件n%的位置
- (n)go -> 去到文件第n个字符

(n)gg或(n)G 是`跳转`到相对行号，比如 113gg，就会跳到`行间移动`这一行，编译失败的报错信息往往会包含行号，用这个来准确定位吧

### 练习

使用以下命令来编译我给你准备好的`C++`代码，文件名可以用`Tab`补全
找到报错的位置，修改掉它

> 用`<leader>e`打开文件树，详细用法 -> [文件操作](./扩展/文件操作.md)

```(text)
:128r!g++ ./Code/somethingError.cpp
```

### LSP 移动

请看 -> [LSP](./扩展/LSP.md)

## 最后随便说两句

学会运笔之后，就可以在纸上开始动手涂涂画画了，从下一章开始，你也是一个入门的 Vimer 了

[下一节: 操作](./4.操作.md)
